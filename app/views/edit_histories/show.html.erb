<div id="c-edit-history">
  <div id="a-show">
    <% if @edit_history.empty? %>
      <h1>Edits for <%= h params[:type] %> #<%= h params[:id] %></h1>
    <% else %>
      <% case @original.versionable_type %>
      <% when "Blip" %>
        <h1>Edits for <%= link_to "Blip ##{@original.versionable_id}", blip_path, id: @original.versionable_id %></h1>
      <% when "Comment" %>
        <h1>Edits for <%= link_to "Comment ##{@original.versionable_id}", comment_path, id: @original.versionable_id %></h1>
      <% when "ForumPost" %>
        <h1>Edits for <%= link_to "ForumPost ##{@original.versionable_id}", forum_post_path, id: @original.versionable_id %></h1>
      <% end %>
    <% end %>

    <div class="response-list" id="edit-history">
      <% @edit_history.each do |edit| %>
        <div class="edit-item box-section edit-<%= edit.edit_type.tr("_", "-") %>" id="edit-<%= edit.id %>">
          <div class="author">
            <h6><%= link_to_user edit.user %></h6>
            <%= compact_time edit.created_at %>
            <% if CurrentUser.is_admin? %>
              <div><%= link_to_ip edit.ip_addr %></div>
            <% end %>
          </div>
          <div class="content">
            <div class="body">
              <% if edit.is_contentful? %>
                <% if (previous = edit.previous_version(@content_edits)) %>
                  <%= lcs_diff(previous.body, edit.body) %>
                <% else %>
                  <%= edit.body %>
                <% end %>
              <% else %>
                <b>
                  <%= edit.text_content %>
                </b>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= numbered_paginator(@edit_history) %>

<%= render "secondary_links", record: @edit_history&.original %>

<% content_for(:page_title) do %>
  Edit History
<% end %>
